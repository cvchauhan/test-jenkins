<p-toast></p-toast>
<div class="dashboard">
    <form>
        <div class="p-grid p-nogutter grid-gutter ">
            <div class="p-md-1 align-middle"><label>Branch</label></div>
            <div class="p-md-2">
                <p-dropdown placeholder="Select" [options]="branchData" optionLabel="txt"
                    [ngModelOptions]="{standalone: true}" [(ngModel)]="branchId"></p-dropdown>
            </div>
            <div class="p-md-1 align-middle"><label>Date</label></div>
            <div class="p-md-2">
                <p-calendar placeholder="Select Date" dateFormat="dd-mm-yy" [(ngModel)]="formDate" [showIcon]="true"
                    inputId="fromD" [ngModelOptions]="{standalone: true}"></p-calendar>
            </div>
            <div class="p-md-1">
                <button type="button" label="View" (click)="filterRunningSheetItem()" pButton></button>
            </div>
        </div>
    </form>
    <p-table #managestock [value]="jobRunningSheetItemTableRes"
        [globalFilterFields]="['CJobNo','SrvName','nJobid','accName','DJobDate','CAddress','CMobile','ScheduledOn','JobStartOn','PatientName','EmpName','EmpMobileNo','dEndDate','CStatus','DutyHours','Jobhours']"
        [autoLayout]="true" [scrollable]="true" scrollHeight="350px" responsiveLayout="scroll" [paginator]="true"
        [rows]="rows" [showCurrentPageReport]="true" [(first)]="first"
        currentPageReportTemplate="Showing {first} to {last} of {totalRecords} entries"
        [rowsPerPageOptions]="[10,20,40,80,120]">
        <ng-template pTemplate="caption">
            <div class="p-grid">
                <div class="p-col-9 p-md-5">
                    <div class="search">
                        <input placeholder="Search" id="search"
                            (input)="managestock.filterGlobal($event.target.value,'contains')" type="text" pInputText>
                        <button pButton type="button" icon="pi pi-search" iconPos="left"></button>
                    </div>
                </div>
            </div>
        </ng-template>
        <ng-template pTemplate="header" let-columns>
            <tr>
                <!-- <th>SrNo</th> -->
                <th [ngStyle]="{'width':'80px'}" pSortableColumn="CJobNo">Job No<p-sortIcon field="CJobNo"></p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'180px'}" pSortableColumn="SrvName">Service<p-sortIcon field="SrvName">
                    </p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'80px'}" pSortableColumn="DJobDate">Job Date<p-sortIcon field="DJobDate">
                    </p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'150px'}" pSortableColumn="CCustNm">Customer<p-sortIcon field="CCustNm">
                    </p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'150px'}" pSortableColumn="CAddress">Address<p-sortIcon field="CAddress">
                    </p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'80px'}" pSortableColumn="CMobile">Mobile<p-sortIcon field="CMobile">
                    </p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'100px'}" pSortableColumn="ScheduledOn">Scheduled On<p-sortIcon
                        field="ScheduledOn"></p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'100px'}" pSortableColumn="JobStartOn">Job Start On<p-sortIcon
                        field="JobStartOn"></p-sortIcon>
                </th>
                <!-- <th pSortableColumn="BranchName">Branch<p-sortIcon field="BranchName"></p-sortIcon>
                </th> -->
                <th [ngStyle]="{'width':'150px'}" pSortableColumn="PatientName">Patient<p-sortIcon field="PatientName">
                    </p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'100px'}" pSortableColumn="EmpName">Assign To<p-sortIcon field="EmpName">
                    </p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'100px'}" pSortableColumn="EmpMobileNo">Emp Mobile<p-sortIcon
                        field="EmpMobileNo"></p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'100px'}" pSortableColumn="CStatus">Status<p-sortIcon field="CStatus">
                    </p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'100px'}" pSortableColumn="dEndDate">JobEndDate<p-sortIcon field="dEndDate">
                    </p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'100px'}" pSortableColumn="DutyHours">DutyHours<p-sortIcon field="DutyHours">
                    </p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'100px'}" pSortableColumn="Jobhours">Jobhours<p-sortIcon field="Jobhours">
                    </p-sortIcon>
                </th>
                <th [ngStyle]="{'width':'100px'}">Actions</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item let-i="rowIndex">
            <tr>
                <!-- <td>{{i+1}}</td> -->
                <td [ngStyle]="{'width':'80px'}">{{item?.CJobNo}}</td>
                <td [ngStyle]="{'width':'180px'}">{{item?.SrvName}}</td>
                <td [ngStyle]="{'width':'80px'}">{{item?.DJobDate | dateFormat}}</td>
                <td [ngStyle]="{'width':'150px'}">{{item?.CCustNm}}</td>
                <td [ngStyle]="{'width':'150px'}">{{item?.CAddress}}</td>
                <td [ngStyle]="{'width':'80px'}">{{item?.CMobile}}</td>
                <td [ngStyle]="{'width':'100px'}">{{item?.ScheduledOn | dateFormat}}</td>
                <td [ngStyle]="{'width':'100px'}">{{item?.JobStartOn | date: 'dd-MM-yyyy HH:mm'}}</td>
                <!-- <td>{{item?.BranchName}}</td> -->
                <td [ngStyle]="{'width':'150px'}">{{item?.PatientName}}</td>
                <td [ngStyle]="{'width':'100px'}">{{item?.EmpName}}</td>
                <td [ngStyle]="{'width':'100px'}">{{item?.EmpMobileNo}}</td>
                <td [ngStyle]="{'width':'100px'}">{{item?.CStatus}}</td>
                <td [ngStyle]="{'width':'100px'}">{{item?.dEndDate | date: 'dd-MM-yyyy HH:mm'}}</td>
                <td [ngStyle]="{'width':'100px'}">{{item?.DutyHours}}</td>
                <td [ngStyle]="{'width':'100px'}">{{item?.Jobhours}}</td>
                <td [ngStyle]="{'width':'100px'}">
                    <a (click)="JobEnd(item)" href="javascript:void(0)" data-toggle="tooltip" data-placement="top"
                        title="Click to JobEnd">
                        <span class="navLogo">
                            <img src="../../assets/sidebar-icon/jobend.png" alt="">
                        </span>
                    </a>
                    <a style="margin-left:10px;" (click)="FullDay(item)" href="javascript:void(0)" data-toggle="tooltip"
                        data-placement="top" title="Click to FullDay">
                        <span class="navLogo">
                            <img src="../../assets/sidebar-icon/full.png" alt="">
                        </span>
                    </a>
                    <a style="margin-left:10px;" (click)="HalfDay(item)" href="javascript:void(0)" data-toggle="tooltip"
                        data-placement="top" title="Click to HalfDay">
                        <span class="navLogo">
                            <img src="../../assets/sidebar-icon/half.png" alt="">
                        </span>
                    </a>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>